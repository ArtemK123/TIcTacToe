<!DOCTYPE html>
<html>
<head>
	<title>Admin</title>
	<meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../css/admin.css">
</head>
<body>
    <header>
        <h3>Адмін панель</h3>
        <nav>
            <ul>
                <li><a href="./index.html">До гри</a></li>
            </ul>
        </nav>
    </header>
    <div id="feedback_records">
    </div>
    <footer>
            <p>Copyright 2019 - All rights are reserved</p>
    </footer>
    
    <script>
        xmlhttp = new XMLHttpRequest();
        //xmlhttp.responseType = "json";
        xmlhttp.overrideMimeType("application/json");
        xmlhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                let records = JSON.parse(this.responseText);
                let html = "";
                for (record of records) {
                    html += `<div id=record${record['id']}`;
                    for (key in record) {
                        if (key != "file_path") {
                            html += `<p>${record[key]}</p>`;
                        }
                        else if (key == "file_path") {
                            html += 
                            `<picture id=image${record['id']}>
                                <source srcset="${record['file_path']}">
                                <img src="${record['file_path']}" alt="image${record['id']}/">
                            </picture>`;                
                        }
                    }
                    html += "</div>";
                }
                document.getElementById("feedback_records").innerHTML = html;
            }
        }
        xmlhttp.open("GET", "allRecords.json", true);
        xmlhttp.send();
    </script>
</body>
</html>